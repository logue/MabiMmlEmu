<!DOCTYPE html>
<html
  lang="en"
  xmlns="http://www.w3.org/1999/xhtml"
  prefix="og: http://ogp.me/ns#"
  class="h-100"
>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!--
    <meta
      name="description"
      content="Soundfont2 based Web Mabinogi MML Player written in JavaScript"
    />
    <meta name="author" content="Logue" />
    <meta name="keywords" content="mml, mabinogi, music macro language" />
    <meta property="og:title" content="Mabinogi MML Player for Web" />
    <meta property="og:type" content="article" />
    <meta property="og:url" content="https://logue.dev/MabiMmlEmu/" />
    <meta property="og:image" content="https://logue.dev/MabiMmlEmu/icon.png" />
    <meta property="og:site_name" content="Logue's Lab" />
    <meta
      property="og:description"
      content="Soundfont2 based Web Mabinogi MML Player written in JavaScript."
    />
    <meta property="fb:app_id" content="129144050466298" />
    <meta
      property="article:publisher"
      content="https://www.facebook.com/logue256"
    />
    <meta name="twitter:card" content="Summary" />
    <meta name="twitter:site" content="@logue256" />
    <meta name="twitter:title" content="Mabinogi MML Player for Web" />
    <meta name="twitter:url" content="https://logue.dev/MabiMmlEmu/" />
    <meta
      name="twitter:description"
      content="Soundfont2 based Web Mabinogi MML Player written in JavaScript."
    />
    <meta
      name="twitter:image"
      content="https://logue.dev/MabiMmlEmu/icon.png"
    />
    -->
    <title>Mabinogi MML Emulator</title>
  </head>

  <body class="d-flex flex-column h-100">
    <header>
      <nav class="navbar navbar-expand-md navbar-dark bg-dark">
        <div class="container-fluid d-flex justify-content-between">
          <a class="navbar-brand" href="https://logue.dev/MabiMmlEmu/">
            Mabinogi MML Emulator
          </a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarCollapse"
            aria-controls="navbarCollapse"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse flex-grow-0" id="navbarCollapse">
            <!--
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link active" href="./">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link disabled" href="./flmml.html">
                  FlMML Version
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="https://github.com/logue/MabiMmlEmu/">
                  <em class="bi bi-github"></em>
                </a>
              </li>
            </ul>
            <ul class="navbar-nav">
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDarkDropdownMenuLink" role="button"
                  data-bs-toggle="dropdown" aria-expanded="false">
                  See Also
                </a>
                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDarkDropdownMenuLink">
                  <li>
                    <a class="dropdown-item" href="https://github.com/logue/smfplayer.js/">
                      smfplayer.js
                    </a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="https://github.com/logue/sf2synth.js/">
                      sf2synth.js
                    </a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="https://github.com/logue/Reverb.js/">
                      Reverb.js
                    </a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="https://github.com/logue/MabiMmlEmu/">
                      MabiMmlEmu
                    </a>
                  </li>
                </ul>
              </li>
            </ul>
            -->
            <ul class="navbar-nav">
              <li class="nav-item">
                <a class="nav-link" href="https://github.com/logue/MabiMmlEmu/">
                  <em class="bi bi-github"></em>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <main role="main" class="flex-shrink-0 mt-4">
      <div class="container">
        <h1>Mabinogi MML Emulator</h1>
        <p>
          This program is an MML player that reproduces the MML played by the
          playing skills of Nexon's online game "Mabinogi" on the Web. It
          produces almost the same sound as the actual game sound.
        </p>

        <div
          id="info"
          class="alert alert-warning alert-dismissible fade show"
          role="alert"
        >
          <p class="mb-0">Initializing...</p>
          <div class="progress hide" id="progress">
            <div
              class="progress-bar percentage"
              role="progressbar"
              style="width: 0%"
              aria-valuemin="0"
              aria-valuemax="100"
            >
              0%
            </div>
          </div>
        </div>

        <!-- player panel-->
        <section class="card mb-3" id="player">
          <div class="card-header">
            <div class="d-flex justify-content-between">
              <div>
                <h2 class="card-title h5">Mabinogi MML Player</h2>
                <h3 class="card-subtitle mb-2 text-muted h6">
                  Drag and drop *.mms, *.mml, *.mmi file here, to play local
                  midi file.
                </h3>
              </div>
            </div>
            <!-- Tabs -->
            <ul
              class="nav nav-tabs card-header-tabs"
              id="control-tab"
              role="tablist"
            >
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link active"
                  id="tab-player"
                  aria-current="true"
                  data-bs-toggle="tab"
                  data-bs-target="#player-tab-content"
                  type="button"
                  role="tab"
                  aria-controls="player-tab-content"
                  aria-selected="true"
                >
                  <em class="bi bi-music-player-fill"></em>
                  Player
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button
                  class="nav-link"
                  id="tab-option"
                  aria-current="true"
                  data-bs-toggle="tab"
                  data-bs-target="#option-tab-content"
                  type="button"
                  role="tab"
                  aria-controls="option-tab-content"
                >
                  <em class="bi bi-gear-fill"></em>
                  Option
                </button>
              </li>
            </ul>
          </div>

          <div class="card-body">
            <div class="tab-content" id="plyaer-tab-contents">
              <div
                class="tab-pane fade show active"
                id="player-tab-content"
                role="tabpanel"
                aria-labelledby="player-tab"
              >
                <!-- Player control -->
                <div class="d-sm-flex align-items-center mb-2">
                  <div>
                    <button
                      type="button"
                      class="btn btn-info btn-lg control-btn"
                      id="prev"
                      disabled="disabled"
                      title="Previous Music"
                    >
                      <em class="bi bi-skip-start-fill"></em>
                    </button>
                    <button
                      type="button"
                      class="btn btn-primary btn-lg control-btn"
                      id="play"
                      disabled="disabled"
                      title="Play / Pause"
                    >
                      <em class="bi bi-play-fill"></em>
                    </button>
                    <button
                      type="button"
                      class="btn btn-danger btn-lg control-btn"
                      id="stop"
                      disabled="disabled"
                      title="Stop"
                    >
                      <em class="bi bi-stop-fill"></em>
                    </button>
                    <button
                      type="button"
                      class="btn btn-info btn-lg control-btn"
                      id="next"
                      disabled="disabled"
                      title="Next Music"
                    >
                      <em class="bi bi-skip-end-fill"></em>
                    </button>
                    <button
                      type="button"
                      class="btn btn-warning btn-lg control-btn"
                      id="panic"
                      disabled="disabled"
                      title="Panic"
                    >
                      <em class="bi bi-exclamation-octagon"></em>
                    </button>
                    <!--button type="button" class="btn btn-secondary btn-lg control-btn" id="copy" disabled="disabled"
                    title="Copy midi URL to clipboard">
                    <em class="bi bi-share"></em>
                  </button-->
                  </div>
                  <!-- time -->
                  <div class="flex-grow-1 mx-3">
                    <div class="Clock-Wrapper">
                      <span class="Clock-Time-Background h4">
                        <em class="bi bi-clock-fill"></em>
                        ~:~~:~~ / ~:~~:~~ &nbsp;
                        <em class="bi bi-music-note"></em>
                        ~~~
                      </span>
                      <span id="clock" class="Clock-Time-Front h4">
                        <em class="bi bi-clock-fill"></em>
                        <span id="time-now">0:00:00</span>
                        /
                        <span id="time-total">0:00:00</span>
                        &nbsp;
                        <em class="bi bi-music-note"></em>
                        <span id="current-tempo">120</span>
                      </span>
                    </div>
                    <div class="progress" id="music-progress">
                      <div
                        class="progress-bar percentage"
                        role="progressbar"
                        style="width: 0%"
                        aria-valuemin="0"
                        aria-valuemax="100"
                      >
                        0%
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Midi selector -->
                <div class="row">
                  <div class="col-md-8 col-xs-12 mb-2">
                    <label class="form-label" for="files">Sequence file:</label>
                    <div class="input-group">
                      <span class="input-group-text">
                        <em class="bi bi-music-note-list"></em>
                      </span>
                      <select id="files" class="form-select"></select>
                      <button
                        class="btn btn-secondary"
                        type="button"
                        title="Download"
                        id="download"
                      >
                        <em class="bi bi-download"></em>
                      </button>
                    </div>
                  </div>
                  <div class="col-md-4 col-xs-12 mb-2">
                    <label for="zips" class="form-label">
                      Zip archive file:
                    </label>
                    <div class="input-group">
                      <span class="input-group-text">
                        <em class="bi bi-file-earmark-zip"></em>
                      </span>
                      <select id="zips" class="form-select"></select>
                    </div>
                  </div>
                </div>
                <!-- Meta info -->
                <div class="row">
                  <div class="col-md-7 col-xs-12 mb-2">
                    <label class="form-label" for="music_title">Title</label>
                    <input
                      type="text"
                      class="form-control"
                      id="music_title"
                      readonly="readonly"
                    />
                  </div>
                  <div class="col-md-5 col-xs-12 mb-2">
                    <label class="form-label" for="copyright ">Copyright</label>
                    <input
                      type="text"
                      class="form-control"
                      id="copyright"
                      readonly="readonly"
                    />
                  </div>
                  <div class="col-12 mb-2">
                    <label class="form-label" for="text_event">Text</label>
                    <input
                      type="text"
                      class="form-control"
                      id="text_event"
                      readonly="readonly"
                    />
                  </div>
                </div>
              </div>

              <div
                class="tab-pane fade"
                id="option-tab-content"
                role="tabpanel"
                aria-labelledby="option-tab"
              >
                <div class="row">
                  <!-- Loop setting -->
                  <div class="col-md-5 col-xs-12">
                    <div class="form-check form-switch">
                      <input
                        type="checkbox"
                        class="form-check-input"
                        id="random"
                      />
                      <label class="form-check-label" for="random">
                        <em class="bi bi-shuffle"></em>
                        Random
                      </label>
                    </div>
                    <div class="form-check form-switch">
                      <input
                        type="checkbox"
                        class="form-check-input"
                        id="playerloop"
                        onchange="player.setLoop(this.checked);"
                      />
                      <label class="form-check-label" for="playerloop">
                        <em class="bi bi-arrow-repeat"></em>
                        Loop
                      </label>
                    </div>
                  </div>
                  <!-- Tempo and volume -->
                  <div class="col-md-7 col-xs-12">
                    <div>
                      <label for="tempo" class="form-label">
                        Tempo: x
                        <span id="tempo_value" class="badge bg-secondary">
                          1.0
                        </span>
                      </label>
                      <div class="d-flex">
                        <div><em class="bi bi-clock"></em></div>
                        <input
                          id="tempo"
                          type="range"
                          class="form-range ml-1"
                          min="0.1"
                          max="10.0"
                          step="0.1"
                          value="1.0"
                        />
                      </div>
                    </div>
                    <div>
                      <label for="volume" class="form-label">
                        Master Volume:
                        <span id="volume_value" class="badge bg-secondary">
                          0.5
                        </span>
                      </label>
                      <div class="d-flex">
                        <div><em class="bi bi-volume-off"></em></div>
                        <input
                          id="volume"
                          type="range"
                          class="form-range mx-1"
                          min="0"
                          max="1"
                          step="0.01"
                          value="0.5"
                        />
                        <div><em class="bi bi-volume-up"></em></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!--section id="scores">
          <div class="card mb-3">
            <div class="card-header">
              <h2 class="h5">MML</h2>
              <ul
                class="nav nav-tabs card-header-tabs"
                id="trackTab"
                role="tablist"
              >
                <li class="nav-item">
                  <a
                    class="nav-link active"
                    href="#track1"
                    id="track1-tab"
                    data-toggle="tab"
                    role="tab"
                    aria-controls="track1"
                    aria-selected="true"
                  >
                    Track 1
                    <small></small>
                  </a>
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#track2"
                    id="track2-tab"
                    data-toggle="tab"
                    role="tab"
                    aria-controls="track2"
                    aria-selected="false"
                  >
                    Track 2
                    <small></small>
                  </a>
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#track3"
                    id="track3-tab"
                    data-toggle="tab"
                    role="tab"
                    aria-controls="track3"
                    aria-selected="false"
                  >
                    Track 3
                    <small></small>
                  </a>
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#track4"
                    id="track4-tab"
                    data-toggle="tab"
                    role="tab"
                    aria-controls="track4"
                    aria-selected="false"
                  >
                    Track 4
                    <small></small>
                  </a>
                </li>
                <li class="nav-item">
                  <a
                    class="nav-link"
                    href="#track5"
                    id="track5-tab"
                    data-toggle="tab"
                    role="tab"
                    aria-controls="track5"
                    aria-selected="false"
                  >
                    Track 5
                    <small></small>
                  </a>
                </li>
              </ul>
            </div>
            <div class="card-body">
              <div class="tab-content" id="trackTabContent">
                <div
                  class="tab-pane active"
                  role="tabpanel"
                  id="track1"
                  aria-labelledby="track1-tab"
                >
                  <div class="form-group row">
                    <label
                      for="inst1"
                      class="col-sm-4 col-md-3 col-lg-2 col-form-label"
                    >
                      Instrument
                    </label>
                    <select
                      id="inst1"
                      name="inst1"
                      class="form-control col-sm-8 inst"
                    ></select>
                  </div>
                  <div class="form-group row">
                    <label
                      for="pan1"
                      class="col-sm-4 col-md-3 col-lg-2 col-form-label"
                    >
                      Panpod
                    </label>
                    <input
                      type="number"
                      name="pan1"
                      id="pan1"
                      min="0"
                      max="127"
                      value="64"
                      class="pan form-control col-sm-3"
                    />
                    <div class="col-sm-4">
                      <div class="progress" id="bar1">
                        <div
                          class="progress-bar"
                          role="progressbar"
                          aria-valuenow="64"
                          aria-valuemin="0"
                          aria-valuemax="127"
                          style="width: 50%"
                        ></div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="mml1">MML</label>
                    <textarea
                      id="mml1"
                      name="mml1"
                      class="mml form-control"
                      rows="5"
                      placeholder="MML@...,...,...;"
                      pattern="^MML\@([0-9A-GLNORTV#<>.&+-]*)?,([0-9A-GLNORTV#<>.&+-]*)?,([0-9A-GLNORTV#<>.&+-]*)?;$"
                    ></textarea>
                  </div>
                </div>
                <div
                  class="tab-pane"
                  role="tabpanel"
                  id="track2"
                  aria-labelledby="track2-tab"
                >
                  <div class="form-group row">
                    <label
                      for="inst2"
                      class="col-sm-4 col-md-3 col-lg-2 col-form-label"
                    >
                      Instrument
                    </label>
                    <select
                      id="inst2"
                      name="inst2"
                      class="form-control col-sm-8 inst"
                    ></select>
                  </div>
                  <div class="form-group row">
                    <label
                      for="pan2"
                      class="col-sm-4 col-md-3 col-lg-2 col-form-label"
                    >
                      Panpod
                    </label>
                    <input
                      type="number"
                      name="pan2"
                      id="pan2"
                      min="0"
                      max="127"
                      value="64"
                      class="pan form-control col-sm-3"
                    />
                    <div class="col-sm-4">
                      <div class="progress" id="bar2">
                        <div
                          class="progress-bar"
                          role="progressbar"
                          aria-valuenow="64"
                          aria-valuemin="0"
                          aria-valuemax="127"
                          style="width: 50%"
                        ></div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="mml2">MML</label>
                    <textarea
                      id="mml2"
                      name="mml2"
                      class="mml form-control"
                      rows="5"
                      placeholder="MML@...,...,...;"
                      pattern="^MML\@([0-9A-GLNORTV#<>.&+-]*)?,([0-9A-GLNORTV#<>.&+-]*)?,([0-9A-GLNORTV#<>.&+-]*)?;$"
                    ></textarea>
                  </div>
                </div>
                <div
                  class="tab-pane"
                  role="tabpanel"
                  id="track3"
                  aria-labelledby="track3-tab"
                >
                  <div class="form-group row">
                    <label
                      for="inst3"
                      class="col-sm-4 col-md-3 col-lg-2 col-form-label"
                    >
                      Instrument
                    </label>
                    <select
                      id="inst3"
                      name="inst3"
                      class="form-control col-sm-8 inst"
                    ></select>
                  </div>
                  <div class="form-group row">
                    <label
                      for="pan3"
                      class="col-sm-4 col-md-3 col-lg-2 col-form-label"
                    >
                      Panpod
                    </label>
                    <input
                      type="number"
                      name="pan3"
                      id="pan3"
                      min="0"
                      max="127"
                      value="64"
                      class="pan form-control col-sm-3"
                    />
                    <div class="col-sm-4">
                      <div class="progress" id="bar3">
                        <div
                          class="progress-bar"
                          role="progressbar"
                          aria-valuenow="64"
                          aria-valuemin="0"
                          aria-valuemax="127"
                          style="width: 50%"
                        ></div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="mml3">MML</label>
                    <textarea
                      id="mml3"
                      name="mml3"
                      class="mml form-control"
                      rows="5"
                      placeholder="MML@...,...,...;"
                      pattern="^MML\@([0-9A-GLNORTV#<>.&+-]*)?,([0-9A-GLNORTV#<>.&+-]*)?,([0-9A-GLNORTV#<>.&+-]*)?;$"
                    ></textarea>
                  </div>
                </div>
                <div
                  class="tab-pane"
                  role="tabpanel"
                  id="track4"
                  aria-labelledby="track4-tab"
                >
                  <div class="form-group row">
                    <label
                      for="inst4"
                      class="col-sm-4 col-md-3 col-lg-2 col-form-label"
                    >
                      Instrument
                    </label>
                    <select
                      id="inst4"
                      name="inst4"
                      class="form-control col-sm-8 inst"
                    ></select>
                  </div>
                  <div class="form-group row">
                    <label
                      for="pan4"
                      class="col-sm-4 col-md-3 col-lg-2 col-form-label"
                    >
                      Panpod
                    </label>
                    <input
                      type="number"
                      name="pan4"
                      id="pan4"
                      min="0"
                      max="127"
                      value="64"
                      class="pan form-control col-sm-3"
                    />
                    <div class="col-sm-4">
                      <div class="progress" id="bar4">
                        <div
                          class="progress-bar"
                          role="progressbar"
                          aria-valuenow="64"
                          aria-valuemin="0"
                          aria-valuemax="127"
                          style="width: 50%"
                        ></div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="mml4">MML</label>
                    <textarea
                      id="mml4"
                      name="mml4"
                      class="mml form-control"
                      rows="5"
                      placeholder="MML@...,...,...;"
                      pattern="^MML\@([0-9A-GLNORTV#<>.&+-]*)?,([0-9A-GLNORTV#<>.&+-]*)?,([0-9A-GLNORTV#<>.&+-]*)?;$"
                    ></textarea>
                  </div>
                </div>
                <div
                  class="tab-pane"
                  role="tabpanel"
                  id="track5"
                  aria-labelledby="track5-tab"
                >
                  <div class="form-group row">
                    <label
                      for="inst5"
                      class="col-sm-4 col-md-3 col-lg-2 col-form-label"
                    >
                      Instrument
                    </label>
                    <select
                      id="inst5"
                      name="inst5"
                      class="form-control col-sm-8 inst"
                    ></select>
                  </div>
                  <div class="form-group row">
                    <label
                      for="pan5"
                      class="col-sm-4 col-md-3 col-lg-2 col-form-label"
                    >
                      Panpod
                    </label>
                    <input
                      type="number"
                      name="pan5"
                      id="pan5"
                      min="0"
                      max="127"
                      value="64"
                      class="pan form-control col-sm-3"
                    />
                    <div class="col-sm-4">
                      <div class="progress" id="bar5">
                        <div
                          class="progress-bar"
                          role="progressbar"
                          aria-valuenow="64"
                          aria-valuemin="0"
                          aria-valuemax="127"
                          style="width: 50%"
                        ></div>
                      </div>
                    </div>
                  </div>
                  <div class="form-group">
                    <label for="mml5">MML</label>
                    <textarea
                      id="mml5"
                      name="mml5"
                      class="mml form-control"
                      rows="5"
                      placeholder="MML@...,...,...;"
                      pattern="^MML\@([0-9A-GLNORTV#<>.&+-]*)?,([0-9A-GLNORTV#<>.&+-]*)?,([0-9A-GLNORTV#<>.&+-]*)?;$"
                    ></textarea>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section-->

        <!-- WebMidiLink Placeholder -->
        <div class="card mb-3">
          <h2 class="card-header h5">Synthesyther</h2>
          <div class="card-body p-0" id="wml"></div>
        </div>
      </div>
    </main>

    <footer class="footer mt-auto py-3 mb-0 bg-light">
      <address class="container mb-0">
        <a href="https://github.com/logue/MabiMmlEmu">MabiMmlEmu</a>
        &copy;2006-2013, 2015, 2018, 2019, 2022 by
        <a href="https://logue.dev/">Logue</a>
        . Licensed under the
        <a href="http://opensource.org/licenses/mit-license.php">MIT License</a>
        .
        <br />
        <small class="text-muted">
          The text, images, and other copyrights and all intellectual property
          rights related to "Mabinogi" used in this program belong to
          <a href="https://jp.nexon.com/" target="_blank">NEXON</a>
          . and
          <a href="https://www.nexon.com/" target="_blank">NEXON Korea</a>
          . See also the NEXON Copyright Guidelines.
        </small>
      </address>
    </footer>
    <!-- /container -->
    <script
      src="https://cdn.jsdelivr.net/npm/zlibjs@0.3.1/bin/unzip.min.js"
      integrity="sha256-pKobUkzPTKMnWX5yXGUt55Lp7W9pboaAhaXiI/hgIr4="
      crossorigin="anonymous"
    ></script>
    <script type="module" src="/src/player.js"></script>
  </body>
</html>
